(this["webpackJsonpextraordinary-growth-app"]=this["webpackJsonpextraordinary-growth-app"]||[]).push([[4],{49:function(e,t,a){"use strict";a.r(t);var s=a(6),r=a(1),i=a(45),n=a(46),o=a(57),c=a(55),l=a(50),d=a(51),u=a(52),h=a(56),b=a(16),j=a(3),g=a(0);i.f.register(i.e,i.l,i.n,i.k,i.c,i.r,i.s,i.i,i.h,i.a);const p=(e,t)=>{const a=[];if(e.currentStreak>=7?a.push({type:"success",icon:"\ud83d\udd25",title:"Ottima Consistenza!",message:"".concat(e.currentStreak," giorni consecutivi di allenamento. Continua cos\xec!")}):0===e.totalWorkouts&&a.push({type:"warning",icon:"\ud83c\udfaf",title:"Inizia il Tuo Percorso",message:"\xc8 ora di registrare il tuo primo workout!"}),e.averageWorkoutDuration<30?a.push({type:"info",icon:"\u23f0",title:"Intensit\xe0 Workout",message:"Considera di aumentare la durata media degli allenamenti (30+ min)."}):e.averageWorkoutDuration>90&&a.push({type:"warning",icon:"\ud83d\udea8",title:"Workout Lunghi",message:"Allenamenti molto lunghi: assicurati di mantenere l'intensit\xe0."}),e.uniqueExercises<10&&e.totalExercises>20&&a.push({type:"info",icon:"\ud83d\udd04",title:"Variet\xe0 Esercizi",message:"Prova ad aggiungere pi\xf9 variet\xe0 ai tuoi allenamenti."}),e.nutritionAdherence>=80?a.push({type:"success",icon:"\ud83e\udd57",title:"Ottima Aderenza Dieta!",message:"".concat(e.nutritionAdherence,"% di aderenza alla dieta. Eccellente disciplina!")}):e.nutritionAdherence<60&&a.push({type:"warning",icon:"\ud83c\udfaf",title:"Migliora l'Aderenza",message:"Prova a seguire pi\xf9 costantemente il piano alimentare per risultati ottimali."}),e.recoverySessionsTotal>=10?a.push({type:"success",icon:"\ud83d\udec1",title:"Ottimo Recovery!",message:"".concat(e.recoverySessionsTotal," sessioni di recupero. Il riposo \xe8 fondamentale!")}):0===e.recoverySessionsTotal&&e.totalWorkouts>5&&a.push({type:"info",icon:"\ud83e\uddd8",title:"Aggiungi Recovery",message:"Considera di integrare pratiche di recupero per migliorare le performance."}),t.progress.length>=3){const e=t.progress.slice(0,3).map(e=>e.weight).filter(e=>e);if(e.length>=2){const t=e[0]-e[e.length-1];Math.abs(t)<.5&&a.push({type:"info",icon:"\u2696\ufe0f",title:"Peso Stabile",message:"Il tuo peso \xe8 rimasto stabile. Ottimo per la ricomposizione corporea!"})}}return a.slice(0,4)};t.default=()=>{const[e,t]=Object(r.useState)({progress:[],workouts:[],exercises:[],nutrition:[],recovery:[]}),[a,i]=Object(r.useState)(!0),[m,O]=Object(r.useState)("3months"),[v,x]=Object(r.useState)("weight");Object(r.useEffect)(()=>{y()},[user,m]);const y=async()=>{i(!0);try{var e,a,s,r,n;j.c.info("Caricamento dati analytics...");const i=new Date,o=w(m),[c,l,d,u,h]=await Promise.all([b.c.getUserProgress(o.toISOString().split("T")[0],i.toISOString().split("T")[0]),b.f.getUserSessions(100),b.a.getWithQuery([]),b.b.getUserMeals(o.toISOString().split("T")[0],i.toISOString().split("T")[0]),b.d.getUserRecoverySessions(o.toISOString().split("T")[0],i.toISOString().split("T")[0])]);t({progress:c.success?c.data:[],workouts:l.success?l.data:[],exercises:d.success?d.data:[],nutrition:u.success?u.data:[],recovery:h.success?h.data:[]}),j.c.success("Dati analytics caricati",{progress:(null===(e=c.data)||void 0===e?void 0:e.length)||0,workouts:(null===(a=l.data)||void 0===a?void 0:a.length)||0,exercises:(null===(s=d.data)||void 0===s?void 0:s.length)||0,nutrition:(null===(r=u.data)||void 0===r?void 0:r.length)||0,recovery:(null===(n=h.data)||void 0===n?void 0:n.length)||0})}catch(o){j.c.error("Errore caricamento analytics",o)}finally{i(!1)}},w=e=>{const t=new Date;switch(e){case"1month":return Object(o.a)(t,30);case"3months":default:return Object(o.a)(t,90);case"6months":return Object(o.a)(t,180);case"1year":return Object(o.a)(t,365)}},f=Object(r.useMemo)(()=>{if(!e.progress.length)return null;const t=[...e.progress].sort((e,t)=>new Date(e.date)-new Date(t.date)),a=t.map(e=>Object(c.a)(new Date(e.date),"dd MMM",{locale:h.a})),s=[];return"weight"!==v&&"all"!==v||s.push({label:"Peso (kg)",data:t.map(e=>e.weight||null),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!0,tension:.3,pointRadius:4,pointHoverRadius:6}),"muscle"!==v&&"all"!==v||s.push({label:"Massa Muscolare (kg)",data:t.map(e=>e.muscleMass||null),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.2)",fill:!0,tension:.3,yAxisID:"y"}),"fat"!==v&&"all"!==v||s.push({label:"Massa Grassa (%)",data:t.map(e=>e.bodyFat||null),borderColor:"rgb(255, 205, 86)",backgroundColor:"rgba(255, 205, 86, 0.2)",fill:!1,tension:.3,yAxisID:"all"===v?"y1":"y"}),{labels:a,datasets:s}},[e.progress,v]),N=Object(r.useMemo)(()=>{if(!e.workouts.length)return null;const t=new Date,a=Object(l.a)({start:Object(o.a)(t,29),end:t}).map(t=>{const a=Object(c.a)(t,"yyyy-MM-dd"),s=e.workouts.filter(e=>e.date===a&&"completed"===e.status),r=s.reduce((e,t)=>e+(t.totalDuration||0),0);return{date:a,label:Object(c.a)(t,"dd/MM"),duration:r,sessions:s.length}});return{labels:a.map(e=>e.label),datasets:[{label:"Durata (minuti)",data:a.map(e=>e.duration),backgroundColor:"rgba(54, 162, 235, 0.8)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:2},{label:"Numero Sessioni",data:a.map(e=>e.sessions),backgroundColor:"rgba(255, 159, 64, 0.8)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:2,yAxisID:"y1"}]}},[e.workouts]),D=Object(r.useMemo)(()=>{if(!e.exercises.length)return null;const t={};e.exercises.forEach(e=>{const a=e.exerciseName||"Sconosciuto";t[a]=(t[a]||0)+1});const a=Object.entries(t).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,8),s=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FF6384","#C9CBCF"];return{labels:a.map(e=>{let[t]=e;return t}),datasets:[{label:"Frequenza Esercizi",data:a.map(e=>{let[,t]=e;return t}),backgroundColor:s,borderColor:s.map(e=>e.replace("0.8","1")),borderWidth:2}]}},[e.exercises]),k=Object(r.useMemo)(()=>{if(!e.nutrition.length)return null;const t=new Date,a=Object(l.a)({start:Object(o.a)(t,29),end:t}).map(t=>{const a=Object(c.a)(t,"yyyy-MM-dd"),s=e.nutrition.filter(e=>e.date===a),r=s.filter(e=>"completed"===e.status),i=s.length>0?r.length/s.length*100:0,n=r.reduce((e,t)=>e+(t.proteins||0),0);return{date:a,label:Object(c.a)(t,"dd/MM"),adherenceRate:i,totalProteins:n,completedMeals:r.length,totalMeals:s.length}});return{labels:a.map(e=>e.label),datasets:[{label:"Aderenza Dieta (%)",data:a.map(e=>e.adherenceRate),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.2)",fill:!0,tension:.3,yAxisID:"y"},{label:"Proteine Giornaliere (g)",data:a.map(e=>e.totalProteins),borderColor:"rgb(168, 85, 247)",backgroundColor:"rgba(168, 85, 247, 0.2)",fill:!1,tension:.3,yAxisID:"y1"}]}},[e.nutrition]),C=Object(r.useMemo)(()=>{if(!e.recovery.length)return null;const t={},a={};e.recovery.forEach(e=>{const s=e.activityType;t[s]=(t[s]||0)+1,a[s]=(a[s]||0)+(e.duration||0)});const s={sauna:{name:"\ud83d\udd25 Sauna",color:"#ef4444"},steam_bath:{name:"\ud83d\udca8 Bagno Turco",color:"#06b6d4"},ice_bath:{name:"\ud83e\uddca Ice Bath",color:"#3b82f6"},cold_shower:{name:"\ud83d\udebf Doccia Fredda",color:"#6366f1"},stretching:{name:"\ud83e\udd38 Stretching",color:"#8b5cf6"},meditation:{name:"\ud83e\uddd8 Meditazione",color:"#a855f7"}},r=Object.entries(t).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,6);return{labels:r.map(e=>{var t;let[a]=e;return(null===(t=s[a])||void 0===t?void 0:t.name)||a}),datasets:[{label:"Sessioni Recovery",data:r.map(e=>{let[,t]=e;return t}),backgroundColor:r.map(e=>{var t;let[a]=e;return(null===(t=s[a])||void 0===t?void 0:t.color)||"#6b7280"}),borderColor:r.map(e=>{var t;let[a]=e;return(null===(t=s[a])||void 0===t?void 0:t.color)||"#6b7280"}),borderWidth:2}]}},[e.recovery]),M=Object(r.useMemo)(()=>{if(!e.recovery.length)return null;const t=new Date,a=[];for(let s=3;s>=0;s--){const r=Object(d.a)(Object(o.a)(t,7*s),{locale:h.a}),i=Object(u.a)(r,{locale:h.a}),n=e.recovery.filter(e=>{const t=new Date(e.date);return t>=r&&t<=i}),l=n.reduce((e,t)=>e+(t.duration||0),0);a.push({label:Object(c.a)(r,"dd MMM",{locale:h.a}),sessions:n.length,duration:l})}return{labels:a.map(e=>e.label),datasets:[{label:"Sessioni Recovery",data:a.map(e=>e.sessions),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2},{label:"Durata Totale (min)",data:a.map(e=>e.duration),backgroundColor:"rgba(168, 85, 247, 0.8)",borderColor:"rgba(168, 85, 247, 1)",borderWidth:2,yAxisID:"y1"}]}},[e.recovery]),S=Object(r.useMemo)(()=>{const t={totalWorkouts:e.workouts.filter(e=>"completed"===e.status).length,totalDuration:e.workouts.reduce((e,t)=>e+(t.totalDuration||0),0),averageWorkoutDuration:0,totalExercises:e.exercises.length,uniqueExercises:new Set(e.exercises.map(e=>e.exerciseName)).size,currentStreak:A(),progressEntries:e.progress.length,nutritionAdherence:z(),recoverySessionsTotal:e.recovery.length,avgRecoveryDuration:T()};return t.averageWorkoutDuration=t.totalWorkouts>0?Math.round(t.totalDuration/t.totalWorkouts):0,t.trends=W(),t},[e]),A=()=>{const t=e.workouts.filter(e=>"completed"===e.status).sort((e,t)=>new Date(t.date)-new Date(e.date));if(!t.length)return 0;let a=0;const s=new Date,r=[...new Set(t.map(e=>e.date))];for(let e=0;e<r.length;e++){const t=new Date(r[e]);if(!(Math.floor((s-t)/864e5)<=e+1))break;a++}return a},W=()=>{const t={};if(e.progress.length>=2){const a=[...e.progress].sort((e,t)=>new Date(e.date)-new Date(t.date)).slice(-5);if(a.length>=2){const e=a[0].weight,s=a[a.length-1].weight;t.weight=s>e?"up":s<e?"down":"stable",t.weightChange=Math.abs(s-e).toFixed(1)}}const a=e.workouts.filter(e=>{const t=new Date(e.date);return(new Date-t)/864e5<=14&&"completed"===e.status}),s=a.filter(e=>{const t=new Date(e.date);return(new Date-t)/864e5<=7}),r=a.filter(e=>{const t=new Date(e.date),a=(new Date-t)/864e5;return a>7&&a<=14});if(s.length&&r.length){const e=s.reduce((e,t)=>e+(t.totalDuration||0),0)/s.length,a=r.reduce((e,t)=>e+(t.totalDuration||0),0)/r.length;t.volume=e>a?"up":e<a?"down":"stable",t.volumeChange=Math.abs(e-a).toFixed(0)}return t},z=()=>{if(!e.nutrition.length)return 0;const t=e.nutrition.filter(e=>"completed"===e.status);return Math.round(t.length/e.nutrition.length*100)},T=()=>{if(!e.recovery.length)return 0;const t=e.recovery.reduce((e,t)=>e+(t.duration||0),0);return Math.round(t/e.recovery.length)},F={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:1,cornerRadius:8,displayColors:!0}},scales:{x:{display:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}},y:{display:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},beginAtZero:!1},y1:{type:"linear",display:"all"===v,position:"right",grid:{drawOnChartArea:!1}}}};return a?Object(g.jsx)("div",{className:"analytics-loading",children:Object(g.jsxs)("div",{className:"loading-spinner",children:[Object(g.jsx)("div",{className:"spinner"}),Object(g.jsx)("p",{children:"Caricamento analytics avanzati..."})]})}):Object(g.jsxs)("div",{className:"advanced-analytics",children:[Object(g.jsxs)("div",{className:"analytics-header",children:[Object(g.jsx)("h2",{children:"\ud83d\udcca Analytics Avanzati"}),Object(g.jsxs)("div",{className:"analytics-controls",children:[Object(g.jsxs)("select",{value:m,onChange:e=>O(e.target.value),className:"period-selector",children:[Object(g.jsx)("option",{value:"1month",children:"Ultimo Mese"}),Object(g.jsx)("option",{value:"3months",children:"Ultimi 3 Mesi"}),Object(g.jsx)("option",{value:"6months",children:"Ultimi 6 Mesi"}),Object(g.jsx)("option",{value:"1year",children:"Ultimo Anno"})]}),Object(g.jsxs)("select",{value:v,onChange:e=>x(e.target.value),className:"metric-selector",children:[Object(g.jsx)("option",{value:"weight",children:"Solo Peso"}),Object(g.jsx)("option",{value:"muscle",children:"Solo Massa Muscolare"}),Object(g.jsx)("option",{value:"fat",children:"Solo Massa Grassa"}),Object(g.jsx)("option",{value:"all",children:"Tutti i Parametri"})]})]})]}),Object(g.jsxs)("div",{className:"stats-overview",children:[Object(g.jsxs)("div",{className:"stat-card",children:[Object(g.jsx)("div",{className:"stat-icon",children:"\ud83c\udfcb\ufe0f"}),Object(g.jsxs)("div",{className:"stat-content",children:[Object(g.jsx)("h3",{children:S.totalWorkouts}),Object(g.jsx)("p",{children:"Workout Completati"}),S.trends.volume&&Object(g.jsxs)("span",{className:"trend ".concat(S.trends.volume),children:["up"===S.trends.volume?"\u2197\ufe0f":"down"===S.trends.volume?"\u2198\ufe0f":"\u27a1\ufe0f",S.trends.volumeChange,"min/avg"]})]})]}),Object(g.jsxs)("div",{className:"stat-card",children:[Object(g.jsx)("div",{className:"stat-icon",children:"\u23f1\ufe0f"}),Object(g.jsxs)("div",{className:"stat-content",children:[Object(g.jsxs)("h3",{children:[Math.round(S.totalDuration/60),"h"]}),Object(g.jsx)("p",{children:"Tempo Totale"}),Object(g.jsxs)("span",{className:"sub-stat",children:["Avg: ",S.averageWorkoutDuration,"min"]})]})]}),Object(g.jsxs)("div",{className:"stat-card",children:[Object(g.jsx)("div",{className:"stat-icon",children:"\ud83d\udd25"}),Object(g.jsxs)("div",{className:"stat-content",children:[Object(g.jsx)("h3",{children:S.currentStreak}),Object(g.jsx)("p",{children:"Giorni Consecutivi"}),Object(g.jsx)("span",{className:"streak-indicator",children:S.currentStreak>=7?"\ud83c\udfc6 Ottimo!":S.currentStreak>=3?"\ud83d\udcaa Bene!":"\ud83c\udfaf Continua!"})]})]}),Object(g.jsxs)("div",{className:"stat-card",children:[Object(g.jsx)("div",{className:"stat-icon",children:"\ud83d\udcc8"}),Object(g.jsxs)("div",{className:"stat-content",children:[Object(g.jsx)("h3",{children:S.progressEntries}),Object(g.jsx)("p",{children:"Misurazioni"}),S.trends.weight&&Object(g.jsxs)("span",{className:"trend ".concat(S.trends.weight),children:["up"===S.trends.weight?"\u2197\ufe0f":"down"===S.trends.weight?"\u2198\ufe0f":"\u27a1\ufe0f",S.trends.weightChange,"kg"]})]})]}),Object(g.jsxs)("div",{className:"stat-card",children:[Object(g.jsx)("div",{className:"stat-icon",children:"\ud83e\udd57"}),Object(g.jsxs)("div",{className:"stat-content",children:[Object(g.jsxs)("h3",{children:[S.nutritionAdherence,"%"]}),Object(g.jsx)("p",{children:"Aderenza Dieta"}),Object(g.jsxs)("span",{className:"sub-stat",children:[e.nutrition.filter(e=>"completed"===e.status).length," pasti completati"]})]})]}),Object(g.jsxs)("div",{className:"stat-card",children:[Object(g.jsx)("div",{className:"stat-icon",children:"\ud83d\udec1"}),Object(g.jsxs)("div",{className:"stat-content",children:[Object(g.jsx)("h3",{children:S.recoverySessionsTotal}),Object(g.jsx)("p",{children:"Sessioni Recovery"}),Object(g.jsxs)("span",{className:"sub-stat",children:["Avg: ",S.avgRecoveryDuration,"min"]})]})]})]}),Object(g.jsxs)("div",{className:"charts-grid",children:[f&&Object(g.jsxs)("div",{className:"chart-container",children:[Object(g.jsx)("h3",{children:"\ud83d\udcc8 Progressi Fisici"}),Object(g.jsx)("div",{className:"chart-wrapper",children:Object(g.jsx)(n.c,{data:f,options:F})})]}),N&&Object(g.jsxs)("div",{className:"chart-container",children:[Object(g.jsx)("h3",{children:"\ud83d\udcaa Volume Allenamenti (30 giorni)"}),Object(g.jsx)("div",{className:"chart-wrapper",children:Object(g.jsx)(n.a,{data:N,options:Object(s.a)(Object(s.a)({},F),{},{scales:Object(s.a)(Object(s.a)({},F.scales),{},{y:Object(s.a)(Object(s.a)({},F.scales.y),{},{beginAtZero:!0})})})})})]}),D&&Object(g.jsxs)("div",{className:"chart-container",children:[Object(g.jsx)("h3",{children:"\ud83c\udfaf Distribuzione Esercizi"}),Object(g.jsx)("div",{className:"chart-wrapper",children:Object(g.jsx)(n.b,{data:D,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:10}}}}})})]}),k&&Object(g.jsxs)("div",{className:"chart-container",children:[Object(g.jsx)("h3",{children:"\ud83e\udd57 Aderenza Dieta & Proteine (30 giorni)"}),Object(g.jsx)("div",{className:"chart-wrapper",children:Object(g.jsx)(n.c,{data:k,options:Object(s.a)(Object(s.a)({},F),{},{scales:{x:F.scales.x,y:Object(s.a)(Object(s.a)({},F.scales.y),{},{beginAtZero:!0,max:100,title:{display:!0,text:"Aderenza (%)"}}),y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,title:{display:!0,text:"Proteine (g)"},grid:{drawOnChartArea:!1}}}})})})]}),C&&Object(g.jsxs)("div",{className:"chart-container",children:[Object(g.jsx)("h3",{children:"\ud83d\udec1 Distribuzione Pratiche Recovery"}),Object(g.jsx)("div",{className:"chart-wrapper",children:Object(g.jsx)(n.b,{data:C,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:12,padding:15}}}}})})]}),M&&Object(g.jsxs)("div",{className:"chart-container",children:[Object(g.jsx)("h3",{children:"\ud83d\udcca Tendenze Recovery Settimanali"}),Object(g.jsx)("div",{className:"chart-wrapper",children:Object(g.jsx)(n.a,{data:M,options:Object(s.a)(Object(s.a)({},F),{},{scales:{x:F.scales.x,y:Object(s.a)(Object(s.a)({},F.scales.y),{},{beginAtZero:!0,title:{display:!0,text:"Sessioni"}}),y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,title:{display:!0,text:"Durata (min)"},grid:{drawOnChartArea:!1}}}})})})]})]}),Object(g.jsxs)("div",{className:"insights-section",children:[Object(g.jsx)("h3",{children:"\ud83d\udca1 Insights Automatici"}),Object(g.jsx)("div",{className:"insights-grid",children:p(S,e).map((e,t)=>Object(g.jsxs)("div",{className:"insight-card ".concat(e.type),children:[Object(g.jsx)("div",{className:"insight-icon",children:e.icon}),Object(g.jsxs)("div",{className:"insight-content",children:[Object(g.jsx)("h4",{children:e.title}),Object(g.jsx)("p",{children:e.message})]})]},t))})]})]})}}}]);
//# sourceMappingURL=4.38489ba0.chunk.js.map