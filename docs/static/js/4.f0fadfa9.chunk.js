(this["webpackJsonpextraordinary-growth-app"]=this["webpackJsonpextraordinary-growth-app"]||[]).push([[4],{60:function(e,t,a){"use strict";a.r(t);var s=a(3),r=a(1),i=a(55),n=a(56),o=a(66),c=a(64),l=a(67),d=a(48),u=a(61),h=a(65),b=a(17),j=a(19),g=a(4),p=a(0);i.f.register(i.e,i.l,i.n,i.k,i.c,i.r,i.s,i.i,i.h,i.a);const m=(e,t)=>{const a=[];if(e.currentStreak>=7?a.push({type:"success",icon:"\ud83d\udd25",title:"Ottima Consistenza!",message:"".concat(e.currentStreak," giorni consecutivi di allenamento. Continua cos\xec!")}):0===e.totalWorkouts&&a.push({type:"warning",icon:"\ud83c\udfaf",title:"Inizia il Tuo Percorso",message:"\xc8 ora di registrare il tuo primo workout!"}),e.averageWorkoutDuration<30?a.push({type:"info",icon:"\u23f0",title:"Intensit\xe0 Workout",message:"Considera di aumentare la durata media degli allenamenti (30+ min)."}):e.averageWorkoutDuration>90&&a.push({type:"warning",icon:"\ud83d\udea8",title:"Workout Lunghi",message:"Allenamenti molto lunghi: assicurati di mantenere l'intensit\xe0."}),e.uniqueExercises<10&&e.totalExercises>20&&a.push({type:"info",icon:"\ud83d\udd04",title:"Variet\xe0 Esercizi",message:"Prova ad aggiungere pi\xf9 variet\xe0 ai tuoi allenamenti."}),e.nutritionAdherence>=80?a.push({type:"success",icon:"\ud83e\udd57",title:"Ottima Aderenza Dieta!",message:"".concat(e.nutritionAdherence,"% di aderenza alla dieta. Eccellente disciplina!")}):e.nutritionAdherence<60&&a.push({type:"warning",icon:"\ud83c\udfaf",title:"Migliora l'Aderenza",message:"Prova a seguire pi\xf9 costantemente il piano alimentare per risultati ottimali."}),e.recoverySessionsTotal>=10?a.push({type:"success",icon:"\ud83d\udec1",title:"Ottimo Recovery!",message:"".concat(e.recoverySessionsTotal," sessioni di recupero. Il riposo \xe8 fondamentale!")}):0===e.recoverySessionsTotal&&e.totalWorkouts>5&&a.push({type:"info",icon:"\ud83e\uddd8",title:"Aggiungi Recovery",message:"Considera di integrare pratiche di recupero per migliorare le performance."}),t.progress.length>=3){const e=t.progress.slice(0,3).map(e=>e.weight).filter(e=>e);if(e.length>=2){const t=e[0]-e[e.length-1];Math.abs(t)<.5&&a.push({type:"info",icon:"\u2696\ufe0f",title:"Peso Stabile",message:"Il tuo peso \xe8 rimasto stabile. Ottimo per la ricomposizione corporea!"})}}return a.slice(0,4)};t.default=()=>{const{user:e}=Object(j.b)(),[t,a]=Object(r.useState)({progress:[],workouts:[],exercises:[],nutrition:[],recovery:[]}),[i,O]=Object(r.useState)(!0),[v,x]=Object(r.useState)("3months"),[y,w]=Object(r.useState)("weight");Object(r.useEffect)(()=>{e&&f()},[e,v]);const f=async()=>{O(!0);try{var e,t,s,r,i;g.c.info("Caricamento dati analytics...");const n=new Date,o=N(v),[c,l,d,u,h]=await Promise.all([b.c.getUserProgress(o.toISOString().split("T")[0],n.toISOString().split("T")[0]),b.f.getUserSessions(100),b.a.getWithQuery([]),b.b.getUserMeals(o.toISOString().split("T")[0],n.toISOString().split("T")[0]),b.d.getUserRecoverySessions(o.toISOString().split("T")[0],n.toISOString().split("T")[0])]);a({progress:c.success?c.data:[],workouts:l.success?l.data:[],exercises:d.success?d.data:[],nutrition:u.success?u.data:[],recovery:h.success?h.data:[]}),g.c.success("Dati analytics caricati",{progress:(null===(e=c.data)||void 0===e?void 0:e.length)||0,workouts:(null===(t=l.data)||void 0===t?void 0:t.length)||0,exercises:(null===(s=d.data)||void 0===s?void 0:s.length)||0,nutrition:(null===(r=u.data)||void 0===r?void 0:r.length)||0,recovery:(null===(i=h.data)||void 0===i?void 0:i.length)||0})}catch(n){g.c.error("Errore caricamento analytics",n)}finally{O(!1)}},N=e=>{const t=new Date;switch(e){case"1month":return Object(o.a)(t,30);case"3months":default:return Object(o.a)(t,90);case"6months":return Object(o.a)(t,180);case"1year":return Object(o.a)(t,365)}},D=Object(r.useMemo)(()=>{if(!t.progress.length)return null;const e=[...t.progress].sort((e,t)=>new Date(e.date)-new Date(t.date)),a=e.map(e=>Object(c.a)(new Date(e.date),"dd MMM",{locale:h.a})),s=[];return"weight"!==y&&"all"!==y||s.push({label:"Peso (kg)",data:e.map(e=>e.weight||null),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!0,tension:.3,pointRadius:4,pointHoverRadius:6}),"muscle"!==y&&"all"!==y||s.push({label:"Massa Muscolare (kg)",data:e.map(e=>e.muscleMass||null),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.2)",fill:!0,tension:.3,yAxisID:"y"}),"fat"!==y&&"all"!==y||s.push({label:"Massa Grassa (%)",data:e.map(e=>e.bodyFat||null),borderColor:"rgb(255, 205, 86)",backgroundColor:"rgba(255, 205, 86, 0.2)",fill:!1,tension:.3,yAxisID:"all"===y?"y1":"y"}),{labels:a,datasets:s}},[t.progress,y]),k=Object(r.useMemo)(()=>{if(!t.workouts.length)return null;const e=new Date,a=Object(l.a)({start:Object(o.a)(e,29),end:e}).map(e=>{const a=Object(c.a)(e,"yyyy-MM-dd"),s=t.workouts.filter(e=>e.date===a&&"completed"===e.status),r=s.reduce((e,t)=>e+(t.totalDuration||0),0);return{date:a,label:Object(c.a)(e,"dd/MM"),duration:r,sessions:s.length}});return{labels:a.map(e=>e.label),datasets:[{label:"Durata (minuti)",data:a.map(e=>e.duration),backgroundColor:"rgba(54, 162, 235, 0.8)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:2},{label:"Numero Sessioni",data:a.map(e=>e.sessions),backgroundColor:"rgba(255, 159, 64, 0.8)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:2,yAxisID:"y1"}]}},[t.workouts]),C=Object(r.useMemo)(()=>{if(!t.exercises.length)return null;const e={};t.exercises.forEach(t=>{const a=t.exerciseName||"Sconosciuto";e[a]=(e[a]||0)+1});const a=Object.entries(e).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,8),s=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FF6384","#C9CBCF"];return{labels:a.map(e=>{let[t]=e;return t}),datasets:[{label:"Frequenza Esercizi",data:a.map(e=>{let[,t]=e;return t}),backgroundColor:s,borderColor:s.map(e=>e.replace("0.8","1")),borderWidth:2}]}},[t.exercises]),M=Object(r.useMemo)(()=>{if(!t.nutrition.length)return null;const e=new Date,a=Object(l.a)({start:Object(o.a)(e,29),end:e}).map(e=>{const a=Object(c.a)(e,"yyyy-MM-dd"),s=t.nutrition.filter(e=>e.date===a),r=s.filter(e=>"completed"===e.status),i=s.length>0?r.length/s.length*100:0,n=r.reduce((e,t)=>e+(t.proteins||0),0);return{date:a,label:Object(c.a)(e,"dd/MM"),adherenceRate:i,totalProteins:n,completedMeals:r.length,totalMeals:s.length}});return{labels:a.map(e=>e.label),datasets:[{label:"Aderenza Dieta (%)",data:a.map(e=>e.adherenceRate),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.2)",fill:!0,tension:.3,yAxisID:"y"},{label:"Proteine Giornaliere (g)",data:a.map(e=>e.totalProteins),borderColor:"rgb(168, 85, 247)",backgroundColor:"rgba(168, 85, 247, 0.2)",fill:!1,tension:.3,yAxisID:"y1"}]}},[t.nutrition]),S=Object(r.useMemo)(()=>{if(!t.recovery.length)return null;const e={},a={};t.recovery.forEach(t=>{const s=t.activityType;e[s]=(e[s]||0)+1,a[s]=(a[s]||0)+(t.duration||0)});const s={sauna:{name:"\ud83d\udd25 Sauna",color:"#ef4444"},steam_bath:{name:"\ud83d\udca8 Bagno Turco",color:"#06b6d4"},ice_bath:{name:"\ud83e\uddca Ice Bath",color:"#3b82f6"},cold_shower:{name:"\ud83d\udebf Doccia Fredda",color:"#6366f1"},stretching:{name:"\ud83e\udd38 Stretching",color:"#8b5cf6"},meditation:{name:"\ud83e\uddd8 Meditazione",color:"#a855f7"}},r=Object.entries(e).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,6);return{labels:r.map(e=>{var t;let[a]=e;return(null===(t=s[a])||void 0===t?void 0:t.name)||a}),datasets:[{label:"Sessioni Recovery",data:r.map(e=>{let[,t]=e;return t}),backgroundColor:r.map(e=>{var t;let[a]=e;return(null===(t=s[a])||void 0===t?void 0:t.color)||"#6b7280"}),borderColor:r.map(e=>{var t;let[a]=e;return(null===(t=s[a])||void 0===t?void 0:t.color)||"#6b7280"}),borderWidth:2}]}},[t.recovery]),A=Object(r.useMemo)(()=>{if(!t.recovery.length)return null;const e=new Date,a=[];for(let s=3;s>=0;s--){const r=Object(d.a)(Object(o.a)(e,7*s),{locale:h.a}),i=Object(u.a)(r,{locale:h.a}),n=t.recovery.filter(e=>{const t=new Date(e.date);return t>=r&&t<=i}),l=n.reduce((e,t)=>e+(t.duration||0),0);a.push({label:Object(c.a)(r,"dd MMM",{locale:h.a}),sessions:n.length,duration:l})}return{labels:a.map(e=>e.label),datasets:[{label:"Sessioni Recovery",data:a.map(e=>e.sessions),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2},{label:"Durata Totale (min)",data:a.map(e=>e.duration),backgroundColor:"rgba(168, 85, 247, 0.8)",borderColor:"rgba(168, 85, 247, 1)",borderWidth:2,yAxisID:"y1"}]}},[t.recovery]),W=Object(r.useMemo)(()=>{const e={totalWorkouts:t.workouts.filter(e=>"completed"===e.status).length,totalDuration:t.workouts.reduce((e,t)=>e+(t.totalDuration||0),0),averageWorkoutDuration:0,totalExercises:t.exercises.length,uniqueExercises:new Set(t.exercises.map(e=>e.exerciseName)).size,currentStreak:z(),progressEntries:t.progress.length,nutritionAdherence:F(),recoverySessionsTotal:t.recovery.length,avgRecoveryDuration:I()};return e.averageWorkoutDuration=e.totalWorkouts>0?Math.round(e.totalDuration/e.totalWorkouts):0,e.trends=T(),e},[t]),z=()=>{const e=t.workouts.filter(e=>"completed"===e.status).sort((e,t)=>new Date(t.date)-new Date(e.date));if(!e.length)return 0;let a=0;const s=new Date,r=[...new Set(e.map(e=>e.date))];for(let t=0;t<r.length;t++){const e=new Date(r[t]);if(!(Math.floor((s-e)/864e5)<=t+1))break;a++}return a},T=()=>{const e={};if(t.progress.length>=2){const a=[...t.progress].sort((e,t)=>new Date(e.date)-new Date(t.date)).slice(-5);if(a.length>=2){const t=a[0].weight,s=a[a.length-1].weight;e.weight=s>t?"up":s<t?"down":"stable",e.weightChange=Math.abs(s-t).toFixed(1)}}const a=t.workouts.filter(e=>{const t=new Date(e.date);return(new Date-t)/864e5<=14&&"completed"===e.status}),s=a.filter(e=>{const t=new Date(e.date);return(new Date-t)/864e5<=7}),r=a.filter(e=>{const t=new Date(e.date),a=(new Date-t)/864e5;return a>7&&a<=14});if(s.length&&r.length){const t=s.reduce((e,t)=>e+(t.totalDuration||0),0)/s.length,a=r.reduce((e,t)=>e+(t.totalDuration||0),0)/r.length;e.volume=t>a?"up":t<a?"down":"stable",e.volumeChange=Math.abs(t-a).toFixed(0)}return e},F=()=>{if(!t.nutrition.length)return 0;const e=t.nutrition.filter(e=>"completed"===e.status);return Math.round(e.length/t.nutrition.length*100)},I=()=>{if(!t.recovery.length)return 0;const e=t.recovery.reduce((e,t)=>e+(t.duration||0),0);return Math.round(e/t.recovery.length)},R={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:1,cornerRadius:8,displayColors:!0}},scales:{x:{display:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}},y:{display:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},beginAtZero:!1},y1:{type:"linear",display:"all"===y,position:"right",grid:{drawOnChartArea:!1}}}};return i?Object(p.jsx)("div",{className:"analytics-loading",children:Object(p.jsxs)("div",{className:"loading-spinner",children:[Object(p.jsx)("div",{className:"spinner"}),Object(p.jsx)("p",{children:"Caricamento analytics avanzati..."})]})}):Object(p.jsxs)("div",{className:"advanced-analytics",children:[Object(p.jsxs)("div",{className:"analytics-header",children:[Object(p.jsx)("h2",{children:"\ud83d\udcca Analytics Avanzati"}),Object(p.jsxs)("div",{className:"analytics-controls",children:[Object(p.jsxs)("select",{value:v,onChange:e=>x(e.target.value),className:"period-selector",children:[Object(p.jsx)("option",{value:"1month",children:"Ultimo Mese"}),Object(p.jsx)("option",{value:"3months",children:"Ultimi 3 Mesi"}),Object(p.jsx)("option",{value:"6months",children:"Ultimi 6 Mesi"}),Object(p.jsx)("option",{value:"1year",children:"Ultimo Anno"})]}),Object(p.jsxs)("select",{value:y,onChange:e=>w(e.target.value),className:"metric-selector",children:[Object(p.jsx)("option",{value:"weight",children:"Solo Peso"}),Object(p.jsx)("option",{value:"muscle",children:"Solo Massa Muscolare"}),Object(p.jsx)("option",{value:"fat",children:"Solo Massa Grassa"}),Object(p.jsx)("option",{value:"all",children:"Tutti i Parametri"})]})]})]}),Object(p.jsxs)("div",{className:"stats-overview",children:[Object(p.jsxs)("div",{className:"stat-card",children:[Object(p.jsx)("div",{className:"stat-icon",children:"\ud83c\udfcb\ufe0f"}),Object(p.jsxs)("div",{className:"stat-content",children:[Object(p.jsx)("h3",{children:W.totalWorkouts}),Object(p.jsx)("p",{children:"Workout Completati"}),W.trends.volume&&Object(p.jsxs)("span",{className:"trend ".concat(W.trends.volume),children:["up"===W.trends.volume?"\u2197\ufe0f":"down"===W.trends.volume?"\u2198\ufe0f":"\u27a1\ufe0f",W.trends.volumeChange,"min/avg"]})]})]}),Object(p.jsxs)("div",{className:"stat-card",children:[Object(p.jsx)("div",{className:"stat-icon",children:"\u23f1\ufe0f"}),Object(p.jsxs)("div",{className:"stat-content",children:[Object(p.jsxs)("h3",{children:[Math.round(W.totalDuration/60),"h"]}),Object(p.jsx)("p",{children:"Tempo Totale"}),Object(p.jsxs)("span",{className:"sub-stat",children:["Avg: ",W.averageWorkoutDuration,"min"]})]})]}),Object(p.jsxs)("div",{className:"stat-card",children:[Object(p.jsx)("div",{className:"stat-icon",children:"\ud83d\udd25"}),Object(p.jsxs)("div",{className:"stat-content",children:[Object(p.jsx)("h3",{children:W.currentStreak}),Object(p.jsx)("p",{children:"Giorni Consecutivi"}),Object(p.jsx)("span",{className:"streak-indicator",children:W.currentStreak>=7?"\ud83c\udfc6 Ottimo!":W.currentStreak>=3?"\ud83d\udcaa Bene!":"\ud83c\udfaf Continua!"})]})]}),Object(p.jsxs)("div",{className:"stat-card",children:[Object(p.jsx)("div",{className:"stat-icon",children:"\ud83d\udcc8"}),Object(p.jsxs)("div",{className:"stat-content",children:[Object(p.jsx)("h3",{children:W.progressEntries}),Object(p.jsx)("p",{children:"Misurazioni"}),W.trends.weight&&Object(p.jsxs)("span",{className:"trend ".concat(W.trends.weight),children:["up"===W.trends.weight?"\u2197\ufe0f":"down"===W.trends.weight?"\u2198\ufe0f":"\u27a1\ufe0f",W.trends.weightChange,"kg"]})]})]}),Object(p.jsxs)("div",{className:"stat-card",children:[Object(p.jsx)("div",{className:"stat-icon",children:"\ud83e\udd57"}),Object(p.jsxs)("div",{className:"stat-content",children:[Object(p.jsxs)("h3",{children:[W.nutritionAdherence,"%"]}),Object(p.jsx)("p",{children:"Aderenza Dieta"}),Object(p.jsxs)("span",{className:"sub-stat",children:[t.nutrition.filter(e=>"completed"===e.status).length," pasti completati"]})]})]}),Object(p.jsxs)("div",{className:"stat-card",children:[Object(p.jsx)("div",{className:"stat-icon",children:"\ud83d\udec1"}),Object(p.jsxs)("div",{className:"stat-content",children:[Object(p.jsx)("h3",{children:W.recoverySessionsTotal}),Object(p.jsx)("p",{children:"Sessioni Recovery"}),Object(p.jsxs)("span",{className:"sub-stat",children:["Avg: ",W.avgRecoveryDuration,"min"]})]})]})]}),Object(p.jsxs)("div",{className:"charts-grid",children:[D&&Object(p.jsxs)("div",{className:"chart-container",children:[Object(p.jsx)("h3",{children:"\ud83d\udcc8 Progressi Fisici"}),Object(p.jsx)("div",{className:"chart-wrapper",children:Object(p.jsx)(n.c,{data:D,options:R})})]}),k&&Object(p.jsxs)("div",{className:"chart-container",children:[Object(p.jsx)("h3",{children:"\ud83d\udcaa Volume Allenamenti (30 giorni)"}),Object(p.jsx)("div",{className:"chart-wrapper",children:Object(p.jsx)(n.a,{data:k,options:Object(s.a)(Object(s.a)({},R),{},{scales:Object(s.a)(Object(s.a)({},R.scales),{},{y:Object(s.a)(Object(s.a)({},R.scales.y),{},{beginAtZero:!0})})})})})]}),C&&Object(p.jsxs)("div",{className:"chart-container",children:[Object(p.jsx)("h3",{children:"\ud83c\udfaf Distribuzione Esercizi"}),Object(p.jsx)("div",{className:"chart-wrapper",children:Object(p.jsx)(n.b,{data:C,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:10}}}}})})]}),M&&Object(p.jsxs)("div",{className:"chart-container",children:[Object(p.jsx)("h3",{children:"\ud83e\udd57 Aderenza Dieta & Proteine (30 giorni)"}),Object(p.jsx)("div",{className:"chart-wrapper",children:Object(p.jsx)(n.c,{data:M,options:Object(s.a)(Object(s.a)({},R),{},{scales:{x:R.scales.x,y:Object(s.a)(Object(s.a)({},R.scales.y),{},{beginAtZero:!0,max:100,title:{display:!0,text:"Aderenza (%)"}}),y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,title:{display:!0,text:"Proteine (g)"},grid:{drawOnChartArea:!1}}}})})})]}),S&&Object(p.jsxs)("div",{className:"chart-container",children:[Object(p.jsx)("h3",{children:"\ud83d\udec1 Distribuzione Pratiche Recovery"}),Object(p.jsx)("div",{className:"chart-wrapper",children:Object(p.jsx)(n.b,{data:S,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:12,padding:15}}}}})})]}),A&&Object(p.jsxs)("div",{className:"chart-container",children:[Object(p.jsx)("h3",{children:"\ud83d\udcca Tendenze Recovery Settimanali"}),Object(p.jsx)("div",{className:"chart-wrapper",children:Object(p.jsx)(n.a,{data:A,options:Object(s.a)(Object(s.a)({},R),{},{scales:{x:R.scales.x,y:Object(s.a)(Object(s.a)({},R.scales.y),{},{beginAtZero:!0,title:{display:!0,text:"Sessioni"}}),y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,title:{display:!0,text:"Durata (min)"},grid:{drawOnChartArea:!1}}}})})})]})]}),Object(p.jsxs)("div",{className:"insights-section",children:[Object(p.jsx)("h3",{children:"\ud83d\udca1 Insights Automatici"}),Object(p.jsx)("div",{className:"insights-grid",children:m(W,t).map((e,t)=>Object(p.jsxs)("div",{className:"insight-card ".concat(e.type),children:[Object(p.jsx)("div",{className:"insight-icon",children:e.icon}),Object(p.jsxs)("div",{className:"insight-content",children:[Object(p.jsx)("h4",{children:e.title}),Object(p.jsx)("p",{children:e.message})]})]},t))})]})]})}}}]);
//# sourceMappingURL=4.f0fadfa9.chunk.js.map